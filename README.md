# Webhook Repo â€“ GitHub Webhook Listener with MongoDB and UI

This project is built to receive GitHub webhook events (Push, Pull Request, Merge) from a separate repository (`action-repo`) and reflect them in a minimal frontend UI. It stores each event in MongoDB and updates the UI in real time (polling every 15 seconds).

---
Note: The webhook URL used in my testing is via ngrok and is no longer active.
To test this project, you will need to:

1. Run the Flask server
2. Start a new ngrok tunnel (`ngrok http 5000`)
3. Update your GitHub webhook settings to use the new tunnel

##  Features

-  Handles GitHub **Push**, **Pull Request**, and **Merge** events
-  Stores events in **MongoDB** with structured schema
-  Frontend polls `/events` every 15s and displays clean messages
-  Uses **Flask** backend and plain HTML+JS frontend
-  ngrok used to expose local server for GitHub integration

---

## Tech Stack

- **Backend**: Python + Flask
- **Database**: MongoDB (local or remote)
- **Frontend**: HTML, CSS, JavaScript
- **Tunneling**: ngrok for public webhook testing

---

##  MongoDB Schema

| Field        | Type       | Description                              |
|------------- |----------- |----------------------------------------- |
| `_id`        | ObjectId   | Auto-generated by MongoDB                |
| `request_id` | string     | Commit SHA (push) or PR ID (PR/Merge)    |
| `author`     | string     | GitHub username                          |
| `action`     | string     | One of `push`, `pull_request`, `merge`   |
| `from_branch`| string     | Source branch (for PR/Merge)             |
| `to_branch`  | string     | Destination branch                       |
| `timestamp`  | datetime   | UTC timestamp of the action              |

---

##  How to Run Locally

### 1. Clone the repo

git clone https://github.com/your-username/webhook-repo.git
cd webhook-repo

2. Set up virtual environment

python -m venv venv
venv\Scripts\activate  
pip install -r backend/requirements.txt

3. Set up MongoDB
Ensure MongoDB is running locally on mongodb://localhost:27017/

Or add your Mongo URI to .env:

MONGODB_URI=mongodb://localhost:27017/

4. Start Flask server

cd backend
set FLASK_APP=app.py
flask run

5. Start ngrok

ngrok http 5000
Copy the HTTPS URL and use it as the webhook URL in GitHub (e.g., https://abc123.ngrok-free.app/webhook)

# GitHub Setup (action-repo)

Go to your GitHub action-repo

Settings â†’ Webhooks â†’ Add webhook

Set:

Payload URL: https://<ngrok-url>/webhook

Content type: application/json

Events:  Push, Pull request, Merge

## UI Preview
Open http://localhost:5000 in your browser.

UI updates every 15 seconds and shows:

shivamkumarrai1 pushed to main on 05 Jun 2025, 09:12:47 AM IST
shivamkumarrai1 submitted a pull request from feature/test to main on ...
shivamkumarrai1 merged branch feature/test to main on ...

ðŸ—‚ Repo Structure

webhook-repo/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ db.py
â”‚   â”œâ”€â”€ models.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ script.js
â”œâ”€â”€ .env
â”œâ”€â”€ README.md
ðŸ”— Related Repos

action-repo (triggers GitHub events): link-to-your-action-repo

webhook-repo (this project): link-to-your-webhook-repo

